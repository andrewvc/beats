---
heartbeat.config.monitors:
  path: "${path.config}/monitors.d/*.yml"
  reload.enabled: false
  reload.period: 5s

heartbeat.monitors:
- type: synthetic
  id: my-monitor
  name: My Monitor
  script: |-
    j.step("load homepage", async (page) => {
        await page.goto('https://www.elastic.co');
    });
    j.step("hover over products menu", async (page) => {
        await page.hover('css=[data-nav-item=products]');
    });
    j.step("click uptime", async (page) => {
        await page.click('css=a[href="/uptime-monitoring"]');
    });
  runner_url: "http://localhost:5678"
  browsers: ["chromium", "webkit", "firefox"]
  schedule: "@every 10m"

setup.template.settings:
  index.number_of_shards: 1
  index.codec: best_compression
setup.kibana:
output.elasticsearch:
  hosts:
  - localhost:9200
  protocol: https
  username: heartbeat
  password: changeme
  ssl:
    certificate_authorities: "${HOME}/projects/kibana/packages/kbn-dev-utils/certs/ca.crt"
    certificate: "${HOME}/projects/kibana/packages/kbn-dev-utils/certs/elasticsearch.crt"
    key: "${HOME}/projects/kibana/packages/kbn-dev-utils/certs/elasticsearch.key"
processors:
- add_observer_metadata:
